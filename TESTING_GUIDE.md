# Perspec 플랫폼 테스트 가이드

## 📋 테스트 체크리스트

### 1. 데이터베이스 마이그레이션 확인

**확인 방법:**
```bash
# 서버 디렉토리로 이동
cd server

# 마이그레이션 실행
npx sequelize-cli db:migrate

# 마이그레이션 상태 확인
npx sequelize-cli db:migrate:status
```

**예상 결과:**
- `mbti_estimations` 테이블 생성됨
- `emotion_analyses` 테이블 생성됨
- `reports` 테이블 생성됨

**문제 발생 시:**
- PostgreSQL이 실행 중인지 확인: `pg_isready`
- 환경 변수 설정 확인: `server/.env` 파일
- 데이터베이스 연결 확인: `psql -U [username] -d [database]`

---

### 2. 백엔드 서버 실행 확인

**확인 방법:**
```bash
# 서버 디렉토리로 이동
cd server

# 서버 실행
npm start
# 또는
node server.js
```

**예상 결과:**
- 콘솔에 "✓ Auth 라우트 로드 성공" 메시지들 출력
- "✓ MBTI 라우트 로드 성공" 메시지 출력
- "✓ Emotion 라우트 로드 성공" 메시지 출력
- "✓ Reports 라우트 로드 성공" 메시지 출력
- 서버가 포트 5000에서 실행 중

**확인 사항:**
- 브라우저에서 `http://localhost:5000` 접속 시 JSON 응답 확인
- 에러가 없어야 함

---

### 3. 프론트엔드 서버 실행 확인

**확인 방법:**
```bash
# 클라이언트 디렉토리로 이동
cd client

# 개발 서버 실행
npm run dev
```

**예상 결과:**
- Vite 개발 서버가 실행됨 (보통 포트 5173)
- 브라우저에서 로그인 페이지가 표시됨

---

### 4. MBTI 추정 기능 테스트

#### 4-1. MBTI 추정 API 테스트

**확인 방법:**

1. **로그인 후 토큰 확인:**
   - 브라우저 개발자 도구 → Application → Local Storage
   - `token` 키에 JWT 토큰이 있는지 확인

2. **API 엔드포인트 테스트 (Postman 또는 curl):**
   ```bash
   # MBTI 추정 생성
   curl -X POST http://localhost:5000/api/mbti/estimate \
     -H "Authorization: Bearer YOUR_TOKEN_HERE" \
     -H "Content-Type: application/json"
   ```

3. **예상 응답 (성공 시):**
   ```json
   {
     "message": "MBTI 추정이 완료되었습니다.",
     "estimation": {
       "id": "uuid",
       "mbti_type": "ENFP",
       "confidence": 75,
       ...
     }
   }
   ```

4. **예상 응답 (데이터 부족 시):**
   ```json
   {
     "message": "충분한 데이터가 없습니다...",
     "dataSources": { ... }
   }
   ```

**프론트엔드에서 확인:**
1. `/mbti` 페이지 접속
2. "MBTI 추정 시작" 버튼 클릭
3. 로딩 애니메이션 확인 (30-60초)
4. 결과 페이지로 자동 이동 확인
5. MBTI 유형, 점수, 특징 표시 확인

---

#### 4-2. MBTI 히스토리 조회 API 테스트

**확인 방법:**
```bash
curl -X GET http://localhost:5000/api/mbti/history \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**예상 응답:**
```json
{
  "estimations": [
    {
      "id": "uuid",
      "mbti_type": "ENFP",
      "confidence": 75,
      "created_at": "2025-01-..."
    }
  ]
}
```

**프론트엔드에서 확인:**
- `/mbti` 페이지에서 이전 추정 결과 표시 확인

---

#### 4-3. MBTI 결과 상세 조회 API 테스트

**확인 방법:**
```bash
curl -X GET http://localhost:5000/api/mbti/[ESTIMATION_ID] \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**예상 응답:**
- 전체 MBTI 추정 결과 (dimensions, characteristics, careers 등)

**프론트엔드에서 확인:**
- `/mbti/[id]` 페이지 접속
- 4개 지표 (E/I, S/N, T/F, J/P) 슬라이더 확인
- 특징, 직업, 환경, 성장 제안 표시 확인

---

### 5. 감정 분석 기능 테스트

#### 5-1. 감정 분석 생성 API 테스트

**확인 방법:**
```bash
curl -X POST http://localhost:5000/api/emotion/analyze \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**예상 응답:**
```json
{
  "message": "감정 분석이 완료되었습니다.",
  "analysis": {
    "id": "uuid",
    "health_score": 75,
    "stability_score": 70,
    "primary_emotions": [...],
    ...
  }
}
```

**프론트엔드에서 확인:**
1. `/emotion` 페이지 접속
2. "감정 분석 시작" 버튼 클릭
3. 로딩 표시 확인
4. 감정 건강 점수 원형 게이지 확인
5. 긍정/부정 비율 차트 확인
6. 주요 감정 태그 확인

---

#### 5-2. 최신 감정 분석 조회 API 테스트

**확인 방법:**
```bash
curl -X GET http://localhost:5000/api/emotion/latest \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**예상 응답:**
- 최신 감정 분석 결과 전체

---

### 6. 종합 레포트 기능 테스트

#### 6-1. 레포트 생성 API 테스트

**확인 방법:**
```bash
curl -X POST http://localhost:5000/api/reports/generate \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -H "Content-Type: application/json" \
  -d '{"title": "테스트 레포트"}'
```

**예상 응답:**
```json
{
  "message": "종합 레포트가 생성되었습니다.",
  "report": {
    "id": "uuid",
    "title": "테스트 레포트",
    "summary": "...",
    "personality": "...",
    ...
  }
}
```

**프론트엔드에서 확인:**
1. `/reports` 페이지 접속
2. 포함될 데이터 체크리스트 확인
3. 레포트 제목 입력 (선택적)
4. "레포트 생성" 버튼 클릭
5. 로딩 표시 확인 (1-2분 소요)
6. 레포트 상세 페이지로 자동 이동

---

#### 6-2. 레포트 목록 조회 API 테스트

**확인 방법:**
```bash
curl -X GET http://localhost:5000/api/reports/list \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**예상 응답:**
```json
{
  "reports": [
    {
      "id": "uuid",
      "title": "레포트 제목",
      "created_at": "2025-01-..."
    }
  ]
}
```

---

#### 6-3. 레포트 상세 조회 API 테스트

**확인 방법:**
```bash
curl -X GET http://localhost:5000/api/reports/[REPORT_ID] \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**프론트엔드에서 확인:**
1. `/reports/[id]` 페이지 접속
2. 레포트 제목, 생성 날짜 확인
3. 목차 클릭 시 해당 섹션으로 스크롤 확인
4. 각 섹션 내용 확인:
   - 전체 요약
   - 성격 분석
   - 강점 및 재능
   - 개선 영역
   - 커리어 제안
   - 라이프스타일 추천
   - 관계 스타일
   - 성장 로드맵
   - 주의사항

---

#### 6-4. PDF 다운로드 기능 테스트

**확인 방법:**
1. 레포트 상세 페이지 (`/reports/[id]`) 접속
2. "PDF 다운로드" 버튼 클릭
3. PDF 파일이 다운로드되는지 확인
4. 다운로드된 PDF 열어서 내용 확인

**문제 발생 시:**
- 브라우저 콘솔에서 에러 확인
- `html2canvas`와 `jspdf` 패키지 설치 확인:
  ```bash
  cd client
  npm list html2canvas jspdf
  ```

---

### 7. 대시보드 개선 확인

**확인 방법:**
1. `/dashboard` 페이지 접속
2. 다음 항목들 확인:

#### 7-1. 프로필 완성도 진행률 바
- 프로필 작성: 25%
- 이미지 업로드: 25%
- 문서 업로드: 25%
- 분석 완료: 25%
- 전체 완성도 퍼센트 표시

#### 7-2. MBTI 결과 카드
- MBTI 유형 표시
- 신뢰도 표시
- "자세히 보기" 버튼 클릭 시 `/mbti/[id]` 이동
- MBTI가 없으면 "MBTI 분석하기" 버튼 표시

#### 7-3. 감정 건강 점수 카드
- 감정 건강 점수 원형 표시
- 안정성 점수 표시
- 긍정/부정 비율 표시
- 감정 분석이 없으면 "감정 분석하기" 버튼 표시

#### 7-4. 종합 레포트 카드
- 레포트 개수 표시
- "레포트 생성" 버튼
- 레포트가 있으면 "최근 레포트 보기" 버튼

#### 7-5. 빠른 액션 버튼들
- 프로필, 업로드, 통계, 레포트 버튼
- 각 버튼 클릭 시 해당 페이지로 이동

#### 7-6. 대시보드 개요 카드
- 프로필, MBTI, 감정 점수, 레포트 개수 표시

---

### 8. 분석 대시보드 확인

**확인 방법:**
1. `/analytics` 페이지 접속
2. 다음 항목들 확인:

#### 8-1. KPI 카드들
- 프로필 완성도 (%)
- 총 분석 횟수
- MBTI 유형
- 감정 건강 점수

#### 8-2. 데이터 분포 차트
- 이미지/문서 분포 막대 그래프
- 각 항목 개수 표시

#### 8-3. MBTI 지표 레이더 차트
- 4개 지표 (EI, SN, TF, JP) 표시
- 각 지표 점수와 타입 표시
- 색상 코딩 (녹색=75+, 파랑=50+, 노랑=25+, 회색=<25)

#### 8-4. 감정 건강 상태
- 긍정/부정 비율 막대 그래프
- 안정성 점수 표시
- 주요 감정 태그 표시

#### 8-5. 활동 요약
- 이미지, 문서, 분석, MBTI 개수 표시
- 각 항목 아이콘과 숫자 확인

#### 8-6. 새로고침 버튼
- 클릭 시 데이터 다시 불러오기 확인

---

### 9. 네비게이션 확인

**확인 방법:**

#### 9-1. 데스크탑 사이드바
1. 로그인 후 대시보드 접속
2. 왼쪽 사이드바 표시 확인:
   - Perspec 로고
   - 메뉴 항목들:
     - 대시보드
     - 프로필 (프로필 보기, 프로필 수정)
     - 미디어 (이미지 갤러리, 업로드, 분석 요약)
     - 문서 (문서 목록, 업로드)
     - 분석 (프로필 분석, 히스토리, MBTI, 감정)
     - 레포트 (레포트 생성)
     - 통계 대시보드
   - 설정, 로그아웃 버튼

3. 현재 페이지 하이라이트 확인
4. 각 메뉴 클릭 시 해당 페이지로 이동 확인

#### 9-2. 모바일 햄버거 메뉴
1. 브라우저 개발자 도구 → 모바일 뷰로 전환
2. 상단 햄버거 메뉴 아이콘 클릭
3. 사이드 메뉴 열림 확인
4. 메뉴 항목 클릭 시 페이지 이동 확인
5. X 버튼으로 메뉴 닫기 확인

---

### 10. 에러 처리 확인

#### 10-1. 데이터 부족 시
**MBTI 추정:**
1. 프로필만 작성하고 이미지/문서 없이 MBTI 추정 시도
2. "충분한 데이터가 없습니다" 에러 메시지 확인
3. 프로필/파일 업로드 페이지 링크 확인

**감정 분석:**
1. 데이터 없이 감정 분석 시도
2. 에러 메시지 확인

**레포트 생성:**
1. 데이터 없이 레포트 생성 시도
2. 에러 메시지 확인

#### 10-2. 네트워크 오류
1. 백엔드 서버 종료
2. 프론트엔드에서 API 호출 시도
3. 적절한 에러 메시지 표시 확인

#### 10-3. 인증 오류
1. 토큰 만료 또는 잘못된 토큰으로 API 호출
2. 자동으로 로그인 페이지로 리다이렉트 확인

---

### 11. 전체 워크플로우 테스트

**완전한 사용자 시나리오:**

1. **회원가입 및 로그인**
   - 새 계정 생성
   - 로그인 확인

2. **프로필 작성**
   - `/profile` 접속
   - 모든 필드 입력
   - 저장 확인

3. **이미지 업로드**
   - `/upload` 접속
   - 여러 이미지 업로드
   - 분석 완료 대기

4. **문서 업로드**
   - `/document-upload` 접속
   - 일기나 메모 업로드
   - 분석 완료 대기

5. **프로필 분석**
   - `/start-analysis` 접속
   - 분석 시작
   - 결과 확인

6. **MBTI 분석**
   - `/mbti` 접속
   - MBTI 추정 시작
   - 결과 확인
   - 결과 페이지에서 모든 섹션 확인

7. **감정 분석**
   - `/emotion` 접속
   - 감정 분석 시작
   - 결과 확인

8. **종합 레포트 생성**
   - `/reports` 접속
   - 레포트 생성
   - 상세 레포트 확인
   - PDF 다운로드

9. **대시보드 확인**
   - `/dashboard` 접속
   - 모든 카드와 데이터 확인

10. **통계 대시보드 확인**
    - `/analytics` 접속
    - 모든 차트와 통계 확인

---

### 12. 성능 확인

**확인 사항:**
1. **페이지 로딩 속도**
   - 각 페이지가 3초 이내에 로드되는지 확인

2. **API 응답 시간**
   - 개발자 도구 → Network 탭에서 API 응답 시간 확인
   - 일반 API: 1초 이내
   - AI 분석 API: 30-60초 (정상)

3. **이미지 로딩**
   - 갤러리에서 이미지가 빠르게 로드되는지 확인

---

## 🐛 일반적인 문제 해결

### 문제 1: "데이터베이스 연결 실패"
**해결:**
- PostgreSQL이 실행 중인지 확인
- `.env` 파일의 DB 설정 확인
- 데이터베이스가 존재하는지 확인

### 문제 2: "AI 분석 서비스를 일시적으로 사용할 수 없습니다"
**해결:**
- `server/.env`에 `OPENAI_API_KEY` 설정 확인
- API 키가 유효한지 확인
- 네트워크 연결 확인

### 문제 3: "PDF 다운로드 실패"
**해결:**
- `html2canvas`와 `jspdf` 패키지 설치 확인
- 브라우저 콘솔에서 에러 확인
- CORS 문제일 수 있음

### 문제 4: "페이지를 찾을 수 없습니다"
**해결:**
- 라우트가 `App.jsx`에 등록되었는지 확인
- URL 경로 확인
- 브라우저 새로고침

---

## ✅ 완료 체크리스트

- [ ] 데이터베이스 마이그레이션 완료
- [ ] 백엔드 서버 정상 실행
- [ ] 프론트엔드 서버 정상 실행
- [ ] MBTI 추정 작동 확인
- [ ] MBTI 결과 표시 확인
- [ ] 감정 분석 작동 확인
- [ ] 감정 분석 차트 표시 확인
- [ ] 종합 레포트 생성 작동 확인
- [ ] 레포트 상세 표시 확인
- [ ] PDF 다운로드 작동 확인
- [ ] 대시보드 개선 확인
- [ ] 통계 대시보드 작동 확인
- [ ] 네비게이션 작동 확인
- [ ] 모바일 반응형 확인
- [ ] 에러 처리 확인

---

## 📞 추가 도움이 필요한 경우

1. 브라우저 콘솔에서 에러 메시지 확인
2. 백엔드 서버 로그 확인
3. 데이터베이스 로그 확인
4. Network 탭에서 API 요청/응답 확인


